# Домашнє завдання 4: Відповіді на питання
## goit-rdb-hw-04
### Автор: Kulik Daria

---

## Завдання 4.2: Аналіз зміни INNER JOIN на LEFT/RIGHT JOIN

### Питання:
Змініть декілька операторів INNER на LEFT чи RIGHT. Визначте, що відбувається з кількістю рядків. Чому?

### Відповідь:

#### Що таке INNER JOIN?
**INNER JOIN** повертає тільки ті рядки, де є збіг в ОБОХ таблицях. Якщо у одній з таблиць немає відповідного запису, такий рядок НЕ включається в результат.

#### Що таке LEFT JOIN?
**LEFT JOIN** повертає ВСІ рядки з лівої таблиці, навіть якщо немає збігу в правій таблиці. Для рядків без збігу в правій таблиці, колонки з правої таблиці будуть заповнені NULL.

#### Що таке RIGHT JOIN?
**RIGHT JOIN** повертає ВСІ рядки з правої таблиці, навіть якщо немає збігу в лівій таблиці. Для рядків без збігу в лівій таблиці, колонки з лівої таблиці будуть заповнені NULL.

---

### Що відбувається з кількістю рядків?

#### При використанні INNER JOIN:
- Результат містить тільки ті рядки, де є збіги у ВСІХ таблицях
- Кількість рядків: **мінімальна** (найменша кількість)
- Якщо в якійсь таблиці немає відповідного запису - весь рядок видаляється

**Приклад:**
Якщо є order_detail для замовлення, але немає відповідного employee (працівник видалений з БД), то цей order_detail НЕ буде в результаті при INNER JOIN.

#### При використанні LEFT JOIN:
- Результат містить ВСІ рядки з лівої таблиці (order_details)
- Якщо немає збігу в правих таблицях - колонки заповнюються NULL
- Кількість рядків: **більша або рівна** INNER JOIN

**Приклад:**
Якщо є order_detail, але немає відповідного employee, рядок ВСЕ ОДНО буде в результаті, але employee_first_name буде NULL.

#### При використанні RIGHT JOIN:
- Результат містить ВСІ рядки з правої таблиці
- Якщо немає збігу в лівій таблиці - колонки заповнюються NULL
- Кількість рядків: залежить від правої таблиці

---

### Чому змінюється кількість рядків?

1. **INNER JOIN виключає "сироті" записи**
   - Якщо в order_details є product_id = 999, але немає продукту з id=999 в таблиці products, цей запис НЕ буде в результаті

2. **LEFT JOIN включає ВСЕ з лівої таблиці**
   - Навіть якщо немає зв'язаних даних в інших таблицях
   - Тому кількість рядків >= INNER JOIN

3. **Цілісність даних впливає на результат**
   - Якщо всі foreign keys правильні і немає NULL значень, INNER JOIN = LEFT JOIN
   - Якщо є "порушення" зв'язків (видалені записи, NULL), LEFT JOIN покаже більше рядків

---

### Практичний приклад з нашою базою даних:

**У нашому випадку:**
- Якщо ВСІ дані чисті і всі зв'язки правильні → кількість рядків однакова для INNER і LEFT JOIN
- Якщо є видалені employee, customer, product → LEFT JOIN покаже більше рядків з NULL значеннями

**Експеримент:**
```sql
-- INNER JOIN
SELECT COUNT(*) FROM order_details od
INNER JOIN orders o ON od.order_id = o.id
INNER JOIN employees e ON o.employee_id = e.employee_id;
-- Результат: наприклад, 518 рядків

-- LEFT JOIN  
SELECT COUNT(*) FROM order_details od
LEFT JOIN orders o ON od.order_id = o.id
LEFT JOIN employees e ON o.employee_id = e.employee_id;
-- Результат: 518 або більше (якщо є "сироті" записи)
```

---

### Висновок:

**INNER JOIN:**
- Найбільш строгий
- Дає найменшу кількість рядків
- Тільки точні збіги

**LEFT JOIN:**
- Зберігає всі дані з основної (лівої) таблиці
- Кількість рядків >= INNER JOIN
- Показує NULL де немає збігів

**RIGHT JOIN:**
- Рідко використовується
- Можна замінити на LEFT JOIN поміняв таблиці місцями

**У нашій базі homework_db:**
Якщо дані повністю цілісні (всі foreign keys валідні), то INNER JOIN і LEFT JOIN дадуть однакову кількість рядків. Різниця з'явиться тільки якщо є "сироті" записи або NULL значення в foreign key полях.

---

## Коли використовувати кожен тип JOIN:

**INNER JOIN:**
- Коли потрібні тільки повні дані
- Коли важлива цілісність
- Для звітів, де неповні дані не мають сенсу

**LEFT JOIN:**
- Коли потрібно бачити ВСІ записи основної таблиці
- Для аналізу відсутніх зв'язків
- Коли NULL значення мають значення для аналізу

**RIGHT JOIN:**
- Рідко використовується в практиці
- Краще переписати як LEFT JOIN

**FULL OUTER JOIN:**
- Коли потрібні ВСІ записи з обох таблиць
- MySQL не підтримує напряму (треба робити UNION LEFT і RIGHT JOIN)
